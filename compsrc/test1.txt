a = (a == b?c?1:a+1:a*(a>>1)),c = d;